# 常用目录

* mysql默认安装目录：`/var/lib/mysql/`，
* 查看数据存放目录命令：`show variables like 'datadir'`。
* 命令目录：/usr/bin和/usr/sbin；常用命令：myqladmin、mysqlbinlog、mysqldump。
* 配置文件目录：/etc/mysql/、/usr/share/mysql-8.0。

# 数据库与文件系统

## 默认数据库

* mysql：核心数据库，存储用户账户和权限、存储过程、事件定义、运行时的日志、时区、帮助。
* information_schema：存储数据库中**维护的所有数据库的信息**，比如某个数据库中的表、视图 、触发器、列、索引等。这些信息并不是真实的用户数据，而是一些描述性信息，一般称为**元数据**。此数据库中以**innodb_sys**开头的表，用于表示内部系统表。
* performance_schema：存储运行时的一些状态信息，可用于**监控MySQL服务的各类指标**。包括统计最近执行了哪些语句，在执行过程的每个阶段都花费了多长时间，内存的使用情况等信息。
* sys：MySQL 系统自带的数据库，这个数据库主要是通过**视图**的形式把 **information_schema** 和 **performance_schema** 结合起来，帮助系统管理员和开发人员监控 MySQL 的技术性能。

## 表在文件系统中的表示

在数据目录（/var/lib/mysql ）下除了information_schema 这个系统数据库外，其他的数据库在数据目录下都有对应的子目录。

### InnoDB

* 表结构：每新创建一张表，InnoDB则会在对应的数据库目录下创建一个用于存储**描述表结构的文件**，文件名：表名.frm。注意：在MySQL8.0中，不再单独提供此文件，而是合并到**表名.ibd**文件中。

* 表数据和索引

  * 系统表空间（system tablespace）：默认情况下，InnoDB会在数据目录下创建一个名为 ibdata1 （大小为 12M ）的文件，注意：这个文件是**自扩展文件** ，当大小不够用的时会自动增加文件大小。

  * 独立表空间（file-per-table tablespace）：在mysql5.6.6及之后的版本，InnoDB默认不再把表的数据存储到系统表空间中，而是为**每个表创建一个独立表空间**。使用独立表空间的情况下，会在该表所属数据库目录下创建一个表示该独立表空间的文件（表数据和索引都存储在这个文件中），文件名：表名.ibd。

  * 系统表空间与独立表空间的设置：

    ```mysql
    # 0：代表使用系统表空间； 1：代表使用独立表空间
    [server]
    innodb_file_per_table=0
    ```

  * 其它类型的表空间：随着MySQL的发展，除了上述两种老牌表空间之外，现在还新提出了一些不同类型的表空间，比如通用表空间（general tablespace）、临时表空间（temporary tablespace）等。

### MyISAM

* 表结构： 每新创建一张表，MyISAM则会在对应的数据库目录下创建一个用于存储**描述表结构的文件**，文件名：表名.frm。注意：MySQL8.0中文件名为；表名.xxx.sdi。
* 表数据和索引：MyISAM的索引全部都是**二级索引**，**数据和索引**是分开存储的。文件名分别为：表名.frm（存储表结构）、表名.MYD（存储表数据MYDATA）、表名.MYI（存储表索引MYINDEX）。

## 总结

* 如果存储引擎是InnoDB，每新创建一张表，则会在数据库对应的目录下创建一个名为**表名.frm**的文件，用于存储描述表结构的文件。
* 如果使用系统表空间的模式，表数据和索引都会存储在**idbdata1**文件中。
* 如果使用独立表空间的模式，表数据和索引则会存储在**表名.ibd**文件中。
* 此外：在MySQL5.7中每个数据库目录下都会生成db.opt文件，此文件用于保存数据的相关配置。比如：字符集、比较规则。而MySQL8.0不再提供此文件。